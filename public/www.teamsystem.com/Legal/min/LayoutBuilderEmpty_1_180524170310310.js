(function(n,t,i){i.fn.TSForm||(i.fn.TSForm=function(r){function l(n){var t={},u=i(n),r=u.filter("input[name!=''][type!=submit][type!=reset]");return r.each(function(){var f=i(this).attr("type"),o=i(this).data("name")||i(this).data("origName")||i(this).attr("name"),n,u,e;switch(f){case"checkbox":case"radio":if(u=r.filter('[data-name="'+i(this).data("name")+'"][type='+f+"]"),u.size()==0&&(u=r.filter('[name="'+i(this).attr("name")+'"][type='+f+"]")),u.size()==1)i(this).hasClass("privacy")?n=i(this).is(":checked"):(n=i(this).filter(":checked").val()||i(this).is(":checked"),n||(n="No"));else{if(t[o])return;e=[];u.each(function(){i(this).is(":checked")&&e.push(i(this).val())});n=e.join(",")}break;default:n=i(this).val();n=i.trim(n)}t[o]=n}),u.filter("select[name!=''], textarea[name!='']").each(function(){var n=i(this).data("name")||i(this).data("origName")||i(this).attr("name");t[n]=i(this).val()}),t}var u={config:i.extend({},{inputs:"input,select,textarea",partecipantiContainer:".partecipanti",partecipantiSelect:"select[name=numero_partecipanti]",partecipanteSelector:".partecipante",success:function(){this.form.find("input:submit").remove();this.form.find(".form_message_ko").remove();this.form.find(".form_message_ko").hide();Legal_ThankYouPage()},error:function(n){this.form.find(".form_message_ok").hide();this.form.find(".form_message_ko").html(n.d.HTML).show()}},r)},f=this.filter("form").first(),o,s,h,c,e;if(f.size()==0)return u;if(u.form=f,f.find(".cap:text").addClass("digits").attr("maxlength","5"),f.find(".telefono:text").addClass("digits").attr({minlength:"8",maxlength:"15"}),f.find(".piva:text").attr("maxlength","16"),u.config.prepareForm&&u.config.prepareForm.call(u,f),u.form.find(".row").find("> div:not(.col-md-12)").each(function(){var n=i(this);n.find("label").size()==0&&n.next().find("input").size()!=0&&n.css({"margin-bottom":"5px","font-size":"12px","font-weight":"bold","margin-top":"10px"})}),f.find(".pull-down .col-lg-7").size()>0&&i(n).resize(function(){f.find(".pull-down .col-lg-7").each(function(){var n=i(this),r=n.parent(),t;n.css("margin-top","");n.prev().offset().top==n.offset().top&&(t=r.height()-n.height()-10,t>10&&n.css("margin-top",t))})}),f.find(".row.mgb10").removeClass("mgb10").find("> div").addClass("mgb10"),u.partecipanti={container:f.find(u.config.partecipantiContainer),select:f.find(u.config.partecipantiSelect)},u.partecipanti.template=u.partecipanti.container.find(u.config.partecipanteSelector).detach(),u.inputs=u.form.find(u.config.inputs),u.validator=u.form.validate({getDataToSend:function(){var n=l(u.inputs);return n.partecipanti=[],u.partecipanti.container.find(u.config.partecipanteSelector).filter(":visible").each(function(){var t=l(i(this).find(u.config.inputs));n.partecipanti.push(t)}),n.partecipanti.length===0&&u.partecipanti.container.size()===0&&n.partecipanti.push({}),n.Referrer=t.referrer,n.Url=t.location.href,n={data:n},u.config.prepareData&&u.config.prepareData.call(u,n),n},callbackHandler:function(n){n.d.Status?(u.config.googleAnalytics&&u.config.googleAnalytics.call(u,n),u.config.success&&u.config.success.call(u,n)):u.config.error&&u.config.error.call(u,n)}}),o=1,s=u.inputs.filter("[data-numero-partecipanti]"),s.each(function(){o=Math.max(o,i(this).data("numeroPartecipanti"))}).bind("click",function(){var t=i(this).data("numeroPartecipanti"),r=u.partecipanti.select.find("option:gt("+t.toString()+"):selected").size()==1,n;for(u.partecipanti.select.find("option:gt("+t.toString()+")").remove(),n=u.partecipanti.select.find("option").size();n<=t;n++)u.partecipanti.select.append(i("<option><\/option>").val(n.toString()).text(n.toString()));r&&u.partecipanti.select.val(u.partecipanti.select.find("option:last").val()).trigger("change")}),s.size()==1&&s.attr("checked","checked"),s.filter(":checked").trigger("click"),o>1){for(u.config.prepareTemplatePartecipante&&u.config.prepareTemplatePartecipante.call(u,u.partecipanti.template),h=0;h<o;h++)c="$"+h.toString(),e=u.partecipanti.template.clone(),u.config.preparePartecipante&&u.config.preparePartecipante.call(u,e,h),e.find("[id][id!='']").each(function(){i(this).attr("id",i(this).attr("id")+c)}),e.find("[name][name!='']").each(function(){i(this).attr("data-orig-name",i(this).attr("name"));i(this).attr("name",i(this).attr("name")+c)}),e.find("[for][for!='']").each(function(){i(this).attr("for",i(this).attr("for")+c)}),u.partecipanti.container.append(e);u.partecipanti.select.bind("change",function(){var t=Number(i(this).val()),r=u.partecipanti.container.find(u.config.partecipanteSelector);t>0?(r.show().filter(":gt("+(t-1).toString()+")").hide(),i(n).resize()):r.hide()}).trigger("change")}return u.field=function(n){var i=this.inputs,t=i.filter("[name="+n+"]");return t.size()==0&&(t=i.filter("[data-orig-name="+n+"]"),t.size()==0&&(t=i.filter("[data-name="+n+"]"),t.size()==0&&(i=this.partecipanti.container.find(this.config.partecipanteSelector).find(this.config.inputs),t=i.filter("[name="+n+"]"),t.size()==0&&(t=i.filter("[data-orig-name="+n+"]"),t.size()==0&&(t=i.filter("[data-name="+n+"]")))))),t},u.config.setupComplete&&u.config.setupComplete.call(u),i(n).resize(),u},i(function(){n.teamsystemForm=i("form.teamsystem-form").TSForm(n.teamsystemFormConfiguration)}))})(window,document,jQuery)